<head>
    <script src="//unpkg.com/3d-force-graph"></script>
	<script src="//unpkg.com/dat.gui"></script>
	
	<style>
        body { margin: 0; }
    </style>
</head>

<body>
    <div id="3d-graph"></div>

    <script>
        const elem = document.getElementById("3d-graph");
        
        const Graph = ForceGraph3D()
			(elem)
                .enableNodeDrag(false)
                .onNodeHover(node => elem.style.cursor = node ? 'pointer' : null);
		
			// Define GUI
		var dji = 310;
		
		const Settings = function() {
			this.dji = dji;
		};
		
		const settings = new Settings();
		const gui = new dat.GUI();
		
		const controllerOne = gui.add(settings, 'dji').step(1);
		
		var djiUrl = '../datasets/flight1/DJI_0' + dji.toString() + '.json';
		
		controllerOne.onChange(
			Graph.jsonUrl(djiUrl)
		);
		
		// Function list
        function removeNode(node) {
            let { nodes, links } = Graph.graphData();
            links = links.filter(l => l.source !== node && l.target !== node); // Remove links attached to node
            nodes.splice(node.id, 1); // Remove node
            nodes.forEach((n, idx) => { n.id = idx; }); // Reset node ids to array index
            Graph.graphData({ nodes, links });
        }
    </script>
</body>